(this["webpackJsonptingme-flipcard"]=this["webpackJsonptingme-flipcard"]||[]).push([[0],{27:function(t,e,n){t.exports=n(56)},29:function(t,e,n){},56:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),a=n(3),s=(n(29),n(1)),o=n(6),c=function(t,e){return new Promise((function(n){setTimeout((function(){return n({moves:t,seconds:e,highScores:[{name:"Lorem Ipsum 01",moves:12,seconds:12},{name:"Lorem Ipsum 02",moves:14,seconds:16},{name:"Lorem Ipsum 03",moves:14,seconds:20}]})}),100)}))},h=n(2),u=n(4),d=function(t,e,n){var r,i=!1,a=0,s=Object(o.a)(n);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(c.first===t&&c.second===e){a=c.amount,i=!0;break}i=!1}}catch(h){s.e(h)}finally{s.f()}return i?a:0},l=function t(e,n,r,i){var a=this;Object(u.a)(this,t),this.addToCache=function(t,e,n,r,i){for(var s=0,o=0;o<t.length;o++){var c=t.charCodeAt(o),h=t.charCodeAt(o-1),u=a.findRegions(c),l=d(h,c,a.kerningsData);a.cache.push({key:u,x:e+s+u.xoffset*a.scale+l*a.scale,y:n+u.yoffset*a.scale+r*a.scale+i,width:u.width*a.scale,height:u.height*a.scale}),s+=u.xadvance*a.scale}},this.beforeDrawing=function(t,e,n,r){if(a.preDraw){for(var i=0,s=0,o=[],c=0;c<r.length;c++){var u=r.charCodeAt(c),l=a.findRegions(u);32!==u?s+=l.xadvance*a.scale:(i=l.xadvance*a.scale,o.push(s),s=0)}var f=Math.max.apply(Math,o)+i;a.newbase=n,a.scale=a.newbase/a.baseLine;for(var p=(r=r.trim()).split("/n").map((function(t){return t.trim()})),g=0,v=0;v<p.length;v++){r=p[v],a.oriWidth=0;for(var w=0;w<r.length;w++){var x=r.charCodeAt(w),m=r.charCodeAt(w-1),b=a.findRegions(x),y=d(m,x,a.kerningsData);a.oriWidth+=y*a.scale,w<r.length-1?a.oriWidth+=b.xadvance*a.scale:a.oriWidth+=b.width*a.scale}var I=a.oriWidth/a.fixedWidth;g=a.lineHeight*a.scale*v;var k=0,C="",O=0;if(I>1&&a.fixedWidth>f)for(var j=0;j<r.length;j++){C+=r[j];var T=r.charCodeAt(j);if((k+=a.findRegions(T).xadvance*a.scale)>=a.fixedWidth)for(var W=j;W>=0;){j--,W--;var D=a.findRegions(r.charCodeAt(j));if(k-=D.xadvance*a.scale,C=C.substring(0,C.length-1),k<=a.fixedWidth&&32===D.id){O=a.lineHeight*a.positionBreak.length,a.positionBreak.push(j),a.lastBreakIndex=j;for(var R=C.trim(),B=0,H=0,M=0;M<R.length;M++)H=a.findRegions(R.charCodeAt(M)),M===R.length-1?B+=H.width*a.scale:B+=H.xadvance*a.scale;var E=a.getPositionBasedOnMode(t,e,B),S=Object(h.a)(E,2),A=S[0],L=S[1];a.addToCache(R,A,L,O,g),k=0,W=-1,C=""}}if(j===r.length-1&&k<a.oriWidth){for(var N="",P=a.lastBreakIndex;P<=j;P++)N+=r[P];for(var _=N.trim(),F=0,J=0,z=0;z<_.length;z++)J=a.findRegions(_.charCodeAt(z)),z===_.length-1?F+=J.width*a.scale:F+=J.xadvance*a.scale;var G=a.getPositionBasedOnMode(t,e,F),U=Object(h.a)(G,2),V=U[0],q=U[1];O=a.lineHeight*a.positionBreak.length,a.addToCache(_,V,q,O,g)}}if(I<=1||a.fixedWidth<f){var K=a.getPositionBasedOnMode(t,e,a.oriWidth),Q=Object(h.a)(K,2),X=Q[0],Y=Q[1];a.addToCache(r,X,Y,0,g)}}0===a.type&&(a.preDraw=!1),a.oriHeight=a.newbase}},this.getPositionBasedOnMode=function(t,e,n){return 0===a.align?t-=Math.round(n/2):1===a.align&&(t-=n),[t,e]},this.setAlignMode=function(t){a.align=t},this.setType=function(t){a.type=t},this.setLineHeight=function(t){a.lineHeight=t},this.setFixedGlyphWidth=function(t){a.fixedWidth=t},this.findRegions=function(t){for(var e=0;e<a.regions.length;e++)if(a.regions[e].id===t)return a.regions[e]},this.draw=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.baseLine;if(0===a.type){a.preDraw&&a.beforeDrawing(n,r,i,e);for(var s=0;s<a.cache.length;s++){var o=a.cache[s];o.key.draw(t,o.x,o.y,o.width,o.height)}}if(1===a.type){a.beforeDrawing(n,r,i,e);for(var c=0;c<a.cache.length;c++){var h=a.cache[c];h.key.draw(t,h.x,h.y,h.width,h.height)}a.cache.length=0,a.positionBreak.length=0}},this.pageImage=e,this.regions=n,this.kerningsData=r,this.canvasWidth=i,this.type=0,this.align=2,this.lineHeight=e.lineHeight,this.baseLine=e.base,this.fixedWidth=i,this.position=new s.b(0,0),this.scale=0,this.newBase=0,this.oriWidth=0,this.oriHeight=0,this.positionBreak=[],this.lastBreakIndex=0,this.cache=[],this.preDraw=!0},f=0;function p(t,e){for(var n=t.split("/"),r=e.split("/"),i=[],a=0,s=n.length;a<s;a++)if(".."===n[a])i.pop();else{if("."===n[a])continue;i.push(n[a])}for(var o=0,c=r.length;o<c;o++)if(".."===r[o])i.pop();else{if("."===r[o])continue;i.push(r[o])}return i.join("/")}var g=function(){var t=Object(a.a)(i.a.mark((function t(e,n,r){var a,o,c,h,u,d,f,g,v,w,x,m,b,y,I,k,C,O,j,T,W,D,R,B,H,M,E,S,A,L,N,P,_,F,J,z,G,U,V,q,K,Q,X,Y,Z,$,tt,et,nt,rt,it,at,st,ot,ct,ht,ut,dt,lt,ft,pt,gt,vt,wt,xt,mt,bt,yt,It,kt,Ct,Ot,jt,Tt;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(n).then((function(t){return t.text()}));case 2:a=t.sent,o=[],c=[],h=[],u=null,d=a.split("\n"),f=0,v=[],w=!1,x=0,m=2;case 13:if(b=d[m],v.length=0,"page"!==(g=b.split(" ").map((function(t){return t.trim()})))[0]){t.next=21;break}x+=1,t.next=22;break;case 21:return t.abrupt("break",25);case 22:m+=1,t.next=13;break;case 25:y=-1,I=2+x+1;case 27:if(void 0!==(k=d[f])){t.next=32;break}return w=!1,t.abrupt("break",39);case 32:if(2===k.split(" ").length&&("kernings"===k.split(" ")[0]&&(w=!0),f++,k=d[f]),w&&null!==u){for(g=(g=k.split(" ").map((function(t){return t.trim()}))).filter((function(t){return""!==t})),v.length=0,C=1;C<g.length;C++)v.push(g[C].split("=")[1]);O=parseInt(v[0],10),j=parseInt(v[1],10),T=parseInt(v[2],10),h.push({first:O,second:j,amount:T})}if(null===u){for(y+=1,v.length=0,g=k.split(" ").map((function(t){return t.trim()})),W=1;W<g.length;W++)v.push(g[W].split("=")[1]);for(D=v[0],R=parseInt(v[1],10),B=0!==parseInt(v[2],10),H=0!==parseInt(v[3],10),M=v[4],E=parseInt(v[5],10),S=parseInt(v[6],10),A=parseInt(v[7],10),L=parseInt(v[8],10),N=v[9].split(",").map((function(t){return parseInt(t,10)})),P=v[10].split(",").map((function(t){return parseInt(t,10)})),_=parseInt(v[11],10),f++,k=d[f],v.length=0,g=k.split(" ").map((function(t){return t.trim()})),F=1;F<g.length;F++)v.push(g[F].split("=")[1]);for(J=parseInt(v[0],10),z=parseInt(v[1],10),G=parseInt(v[2],10),U=parseInt(v[3],10),V=parseInt(v[4],10),q=parseInt(v[5],10),K=parseInt(v[6],10),Q=parseInt(v[7],10),X=parseInt(v[8],10),Y=parseInt(v[9],10),k=d[f=f+y+1],v.length=0,g=k.split(" ").map((function(t){return t.trim()})),Z=1;Z<g.length;Z++)v.push(g[Z].split("=")[1]);$=parseInt(v[0],10),tt=v[1].split('"'),et=p(n,"../".concat(tt[1])),u={file:et,page_id:$,face:D,size:R,bold:B,italic:H,charset:M,unicode:E,stretchH:S,smooth:A,aa:L,padding:N,spacing:P,outline:_,lineHeight:J,base:z,scaleW:G,scaleH:U,num_of_pages:V,packed:q,alphaChnl:K,redChnl:Q,greenChnl:X,blueChnl:Y},o.push(u),k=d[f=I]}if(!w&&null!==u){for(g=(g=k.split(" ").map((function(t){return t.trim()}))).filter((function(t){return""!==t})),v.length=0,nt=1;nt<g.length;nt++)v.push(g[nt].split("=")[1]);rt=parseInt(v[0],10),it=parseInt(v[1],10),at=parseInt(v[2],10),st=parseInt(v[3],10),ot=parseInt(v[4],10),ct=parseInt(v[5],10),ht=parseInt(v[6],10),ut=parseInt(v[7],10),dt=parseInt(v[8],10),(lt={id:rt,left:it,top:at,width:st,height:ot,xoffset:ct,yoffset:ht,xadvance:ut,page:u,id_page:dt}).id_page===y?c.push(lt):y===x-1?w=!0:(I=f,f=-1,u=null)}f++,t.next=27;break;case 39:ft=0,pt=o;case 40:if(!(ft<pt.length)){t.next=50;break}return gt=pt[ft],t.next=44,Object(s.i)(e,gt.file,r);case 44:gt.texture=t.sent,gt.invTextWidth=1/gt.texture.width,gt.invTextHeight=1/gt.texture.height;case 47:ft++,t.next=40;break;case 50:for(vt=[],wt=0,xt=c;wt<xt.length;wt++)mt=xt[wt],bt=mt.left,yt=mt.top,It=mt.width,kt=mt.height,Ct=mt.page,Ot=Ct.texture,jt=Ct.invTexWidth,Tt=Ct.invTexHeight,vt.push(new s.a(Ot,bt,yt,It,kt,mt,jt,Tt));return t.abrupt("return",{getLineHeight:function(){return u.lineHeight},getPages:function(){return o},getRegions:function(){return vt},findRegions:function(t){for(var e=0;e<vt.length;e++)if(vt[e].id===t)return vt[e]},setNewText:function(t){return new l(u,vt,h,t)}});case 53:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),v=function(t){var e,n=t.moves,r=t.time,o=t.canvas,h=t.viewport,u=t.camera,d=t.batch,l=t.worldWidth,p=t.worldHeight,g=t.font,v=function(){var e=Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,w(t);case 3:e.t1=e.sent,e.t0.setCurrentScreen.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=Object(s.f)(o,h),m=t.assets,b=m.bgTexture,y=m.loading,I=m.leaderBoard,k=I.findRegion("board",-1),C=I.findRegion("retry-button",-1),O=I.findRegion("medal",1),j=I.findRegion("medal",2),T=I.findRegion("medal",3),W=l/7.8,D=W*O.height/O.width,R=l/7.8,B=R*j.height/j.width,H=l/7.8,M=H*T.height/T.width,E=[{texture:O,y:.8*p/3,width:W,height:D},{texture:j,y:1.09*p/3,width:R,height:B},{texture:T,y:1.37*p/3,width:H,height:M}],S=.83*l,A=S*k.height/k.width,L=l/5,N=L*C.height/C.width,P=[l/2-L/2,2*p/3,L,N],_=l/5,F=_*y.height/y.width,J=new s.b;x.addEventListener("touchStart",(function(){J.setVector(x.getTouchedWorldCoord()),function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t.x*n,i=t.y*n,a=e[0],s=e[0]+e[2],o=e[1],c=e[1]+e[3];return!(r<a||r>s||i<o||i>c)}(J,P)&&(t.moves=0,t.time=0,v())})),function(){var t=Object(a.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(n,r);case 2:a=t.sent,e=a.highScores;case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()();var z=g.setNewText(l);z.setAlignMode(f);var G=l/3,U=l/15,V=l/23,q=!1,K=[],Q=[.84*p/3,1.13*p/3,1.4*p/3],X=[.95*p/3,1.24*p/3,1.51*p/3],Y=[{name:g.setNewText(l),result:g.setNewText(l)},{name:g.setNewText(l),result:g.setNewText(l)},{name:g.setNewText(l),result:g.setNewText(l)}];return{update:function(t){if(e&&!q&&(q=!0,e.map((function(t){return K.push(t)}))),d.setProjection(u.combined),d.begin(),d.setColor(1,1,1,1),Object(s.g)(d,b,0,0,l,p),k.draw(d,l/2-S/2,.47*p/3,S,A),C.draw(d,P[0],P[1],P[2],P[3]),d.setColor(68/255,18/255,72/255,1),z.draw(d,"".concat(n," moves, ").concat(r,"s"),l/2,1.835*p/3,l/23),d.setColor(1,1,1,1),e)for(var i=0;i<K.length;i++)d.setColor(1,1,1,1),Y[i].name.draw(d,K[i].name,G,Q[i],U),d.setColor(68/255,18/255,72/255,1),Y[i].result.draw(d,"".concat(K[i].moves," moves, ").concat(K[i].seconds,"s"),G,X[i],V),d.setColor(1,1,1,1),E[i].texture.draw(d,l/5.8,E[i].y,E[i].width,E[i].height);else Object(s.g)(d,y,l/2-_/2,1*p/3,_,F);d.end()},destroy:function(){x.cleanup()}}},w=function(t){var e=t.canvas,n=t.viewport,r=t.camera,c=t.batch,h=t.worldWidth,u=t.worldHeight,d=t.assets,l=function(){var e=Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,v(t);case 3:e.t1=e.sent,e.t0.setCurrentScreen.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();for(var f=[],p=0;p<12;p++)f.push(p%6);!function(t){for(var e,n,r=t.length;0!==r;)n=Math.floor(Math.random()*r),e=t[r-=1],t[r]=t[n],t[n]=e}(f);for(var g=[],w=0;w<f.length;w++)g.push({x:w%3,y:Math.floor(w/3),type:f[w],solved:!1,flipped:!1,transition:!1,transitionDuration:0,transitionExpire:0,transitionDelay:0});var x,m,b,y,I,k,C;y=(u-4*(b=((k=h)-2*(x=.05*k)-2*(m=.03*k))/3)-3*m)/2,I=x,C=.06*b;var O=Object(s.f)(e,n),j=d.bgTexture,T=d.atlas,W=T.findRegions("card"),D=T.findRegion("back"),R=T.findRegion("shadow"),B=[],H=0,M=Date.now(),E=0;O.addEventListener("touchStart",(function(){if(!(H>=2)){var t=O.getTouchedWorldCoord().x,e=O.getTouchedWorldCoord().y,n=Math.floor((t-I)/(m+b)),r=Math.floor((e-y)/(m+b));if(!(n<0||r<0||n>2||r>3)){var i=function(t,e){return g[3*e+t]}(n,r);if(!(i.solved||i.transition||i.flipped)&&(i.transition="up",i.transitionDuration=.2,i.transitionExpire=.2,E++,H++,B.push(i),H>=2))if(B[0].type===B[1].type){var a,s=Object(o.a)(B);try{for(s.s();!(a=s.n()).done;){a.value.solved=!0}}catch(u){s.e(u)}finally{s.f()}var c=B[0],h=B[1];H=0,B.length=0,setTimeout((function(){c.transition="away",c.transitionDuration=.2,c.transitionExpire=.2,h.transition="away",h.transitionDuration=.2,h.transitionExpire=.2}),500)}else setTimeout((function(){var t,e=Object(o.a)(B);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.transition="down",n.transitionDuration=.2,n.transitionExpire=.2}}catch(u){e.e(u)}finally{e.f()}B.length=0,H=0}),500)}}}));var S=0;return{update:function(e){c.setProjection(r.combined),c.begin(),c.draw(j,0,0,47,100);var n,i=Object(o.a)(g);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.transition&&(a.transitionExpire-=e,a.transitionExpire<=0&&("up"===a.transition?a.flipped=!0:"down"===a.transition?a.flipped=!1:(a.hidden=!0,++S===g.length&&(t.moves=E,t.time=Math.floor((Date.now()-M)/1e3),l())),a.transition=!1,a.transitionDuration=0,a.transitionExpire=0))}}catch(x){i.e(x)}finally{i.f()}var s,h=Object(o.a)(g);try{for(h.s();!(s=h.n()).done;){var u=s.value;if(!u.hidden){var d=W[u.type],f=I+u.x*(b+m),p=y+u.y*(b+m);if(u.transition)if("up"===u.transition||"down"===u.transition){var v=Math.abs(u.transitionExpire-u.transitionDuration/2)/u.transitionDuration*2;R.draw(c,f+0,p+C,b,b,b/2,b/2,0,v,1),u.transitionExpire>u.transitionDuration/2^"down"===u.transition?D.draw(c,f,p,b,b,b/2,b/2,0,v,1):d.draw(c,f,p,b,b,b/2,b/2,0,v,1)}else{var w=u.transitionExpire/u.transitionDuration;R.draw(c,f+0,p+C,b,b,b/2,b/2,0,w,w),d.draw(c,f,p,b,b,b/2,b/2,0,w,w)}else R.draw(c,f+0,p+C,b,b),u.flipped?d.draw(c,f,p,b,b):D.draw(c,f,p,b,b)}}}catch(x){h.e(x)}finally{h.f()}c.end()},destroy:function(){O.cleanup()}}};(function(){var t=Object(a.a)(i.a.mark((function t(){var e,n,r,a,o,c,h,u,d,l,f,p,v;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 47,100,e=document.getElementById("main"),n=Object(s.e)(e,47,100),r=n.getContext(),a=n.getCamera(),o=Object(s.c)(r),c={moves:0,time:0,canvas:e,viewport:n,gl:r,camera:a,batch:o,worldWidth:47,worldHeight:100,setCurrentScreen:function(t){c.currentScreen&&c.currentScreen.destroy(),c.currentScreen=t}},t.next=10,Object(s.i)(r,"./bg.png");case 10:return h=t.sent,t.next=13,Object(s.h)(r,"./atlas/tingme-flipcard.atlas");case 13:return u=t.sent,t.next=16,Object(s.h)(r,"./atlas/leaderBoard.atlas");case 16:return d=t.sent,t.next=19,Object(s.i)(r,"./loading.png");case 19:return l=t.sent,f={bgTexture:h,leaderBoard:d,atlas:u,loading:l},c.assets=f,t.next=24,g(r,"./fonts/nunito.fnt");case 24:return p=t.sent,c.font=p,t.t0=c,t.next=29,w(c);case 29:t.t1=t.sent,t.t0.setCurrentScreen.call(t.t0,t.t1),r.clearColor(0,0,0,0),v=function(t){r.clear(r.COLOR_BUFFER_BIT),c.currentScreen&&c.currentScreen.update(t)},Object(s.d)(v);case 34:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}},[[27,1,2]]]);
//# sourceMappingURL=main.93739a39.chunk.js.map